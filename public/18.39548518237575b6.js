(self.webpackChunkTickets=self.webpackChunkTickets||[]).push([[18],{2018:(j,b,l)=>{"use strict";l.r(b),l.d(b,{HomeModule:()=>Ne});var f=l(9808),h=l(1083),s=l(7696),t=l(5e3),u=l(7093),c=l(9224);let I=(()=>{class n{constructor(e){this.eleRef=e,this.eleRef.nativeElement.style.position="absolute",this.eleRef.nativeElement.style.height="100px",this.eleRef.nativeElement.style.width="100px",this.eleRef.nativeElement.style.borderRadius="50%",this.eleRef.nativeElement.style.backgroundColor="#001b46",this.eleRef.nativeElement.style.color="white",this.eleRef.nativeElement.style.top="-50px",this.eleRef.nativeElement.style.left="50%",this.eleRef.nativeElement.style.textAlign="center",this.eleRef.nativeElement.style.display="flex",this.eleRef.nativeElement.style.alignItems="center",this.eleRef.nativeElement.style.justifyContent="center",this.eleRef.nativeElement.style.transform="translateX(-50%)"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","mat-card-over",""]]}),n})();var T=l(7423),N=l(4834);function R(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.ALo(4,"titlecase"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-actions")(8,"button",7),t._uU(9,"Acceder"),t.qZA()(),t._UZ(10,"mat-divider"),t.BQk()),2&n){const e=i.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,2,e.section)," "),t.xp6(3),t.hij(" ",e.desc," ")}}function S(n,i){if(1&n&&(t.TgZ(0,"mat-card",2)(1,"div",3),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"mat-card-content",4)(5,"mat-card-header")(6,"mat-card-title"),t._uU(7),t.ALo(8,"titlecase"),t.qZA(),t.TgZ(9,"mat-card-subtitle"),t._uU(10),t.qZA()(),t.TgZ(11,"mat-card-actions")(12,"button",5),t._uU(13,"Acceder"),t.qZA()(),t._UZ(14,"mat-divider"),t.YNc(15,R,11,4,"ng-container",6),t.qZA()()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,5,e.header)),t.xp6(5),t.hij(" ",t.lcZ(8,7,e.section)," "),t.xp6(3),t.hij(" ",e.desc," "),t.xp6(2),t.Q6J("routerLink",e.link),t.xp6(3),t.Q6J("ngForOf",e.suboption)}}let rt=(()=>{class n{constructor(){this.options=[]}ngOnInit(){this.options=[{header:"finanzas",section:"Reliquidaciones",desc:"Solicitudes de reliquidaciones",link:"/tickets/create"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:1,consts:[["fxLayout","row wrap","fxLayoutGap","10px"],["fxFlex","25",4,"ngFor","ngForOf"],["fxFlex","25"],["mat-card-over",""],["fxLayout","column","fxLayoutAlign","none center"],["mat-flat-button","","color","primary",3,"routerLink"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.YNc(1,S,16,9,"mat-card",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.options))},directives:[u.xw,u.SQ,f.sg,c.a8,u.yH,I,c.dn,u.Wh,c.dk,c.n5,c.$j,c.hq,T.lW,h.rH,N.d],pipes:[f.rS],styles:["section[_ngcontent-%COMP%]{background-color:gray;padding-top:100px;height:100%}section[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}section[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-top:72px}section[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{text-align:center}.mat-card[_ngcontent-%COMP%]   .mat-divider-horizontal[_ngcontent-%COMP%]{position:relative}"]}),n})();var B=l(4594),P=l(4623);let lt=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-index"]],decls:9,vars:0,consts:[["color","primary"],["src","/assets/logo2.png","alt",""],[1,"spacer"],["mat-list-item","","routerLink","/"]],template:function(e,o){1&e&&(t.TgZ(0,"main")(1,"mat-toolbar",0),t._UZ(2,"img",1),t.TgZ(3,"span"),t._uU(4,"Sistema de tickets"),t.qZA(),t._UZ(5,"span",2),t.TgZ(6,"a",3),t._uU(7,"Inicio"),t.qZA()(),t._UZ(8,"router-outlet"),t.qZA())},directives:[B.Ye,P.Tg,h.yS,h.lC],styles:["img[_ngcontent-%COMP%]{height:100%}a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();var H=l(655),w=l(4004),k=l(2340),ct=l(4691);let M=(()=>{class n{constructor(e){this.http=e}checkRut(e){return this.http.get(k.N.url+"/api/int/v1/contratos/contratos/"+e)}checkContratos(e,o,a){return this.http.get(k.N.url+"/api/int/v1/contratos/contratos",{params:{zona:e,empresa:o,instalacion:a}})}checkConcepto(){return this.http.get(k.N.url+"/api/int/v1/contratos/concepto")}enviarReliquidacion(e){return this.http.post(k.N.url+"/api/int/v1/contratos",Object.assign({},e))}obtenerListado(e){let o;return e&&(o={},e.forEach(({propiedad:a,valor:r})=>{o[a]=`${r}`})),this.http.get(k.N.url+"/api/int/v1/contratos/listado",{params:Object.assign({},o)})}obtenerDetalles(e){return this.http.get(k.N.url+"/api/int/v1/contratos/detalles",{params:{id:e}})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ct.O))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V=(()=>{class n{transform(e){return e.replace(/([A-Z])/g," $1")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"title",type:n,pure:!0}),n})(),st=(()=>{class n{transform(e){return"v"===e?"Validado":"r"===e?"Rechazado":"Pendiente"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"validaciones",type:n,pure:!0}),n})();function mt(n,i){if(1&n&&(t.TgZ(0,"div",7)(1,"span",8)(2,"strong",9),t._uU(3),t.ALo(4,"titlecase"),t.ALo(5,"title"),t.qZA(),t.TgZ(6,"p",10),t._uU(7),t.qZA()(),t._UZ(8,"hr"),t.qZA()),2&n){const e=i.$implicit;t.xp6(3),t.hij("",t.lcZ(4,2,t.lcZ(5,4,e.key)),":"),t.xp6(4),t.Oqu(e.value)}}function ut(n,i){if(1&n&&(t.TgZ(0,"div",7)(1,"span",8)(2,"strong",9),t._uU(3),t.ALo(4,"titlecase"),t.ALo(5,"title"),t.qZA(),t.TgZ(6,"p",10),t._uU(7),t.qZA()(),t._UZ(8,"hr"),t.qZA()),2&n){const e=i.$implicit;t.xp6(3),t.hij("",t.lcZ(4,2,t.lcZ(5,4,e.key)),":"),t.xp6(4),t.Oqu(e.value)}}function dt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",7)(2,"span",8)(3,"strong",9),t._uU(4,"Validacion 2:"),t.qZA(),t.TgZ(5,"p",10),t._uU(6),t.ALo(7,"validaciones"),t.qZA()(),t._UZ(8,"hr"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,1,null==e.solicitud.validaciones?null:e.solicitud.validaciones[1].estado))}}let pt=(()=>{class n{constructor(e,o,a){this.location=e,this.ticketService=o,this.activeRoute=a,this.solicitud={}}ngOnInit(){const{id:e}=this.activeRoute.snapshot.params;this.ticketService.obtenerDetalles(e).pipe((0,w.U)(({data:o})=>{const{nombreContrato:r,nombreInstalacion:p,nombreEmpresa:_,zona:Z,validaciones:C}=o,x=(0,H._T)(o,["codigoContrato","nombreContrato","codigoInstalacion","nombreInstalacion","nombreEmpresa","zona","validaciones","solicitante"]);return{encabezado:{zona:Z,nombreEmpresa:_,nombreInstalacion:p,nombreContrato:r},informacion:Object.assign({},x),validaciones:C}})).subscribe(o=>{this.solicitud=o}),console.log(e)}ordenarSolicitud(e,o){return 0}volver(){this.location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.Ye),t.Y36(M),t.Y36(h.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detalles"]],decls:31,vars:12,consts:[["fxLayout","column","fxLayoutGap","19px"],[1,"actions"],["mat-flat-button","","color","warn"],["mat-flat-button","","color","primary",3,"click"],[1,"header"],["fxLayout.lg","row wrap","fxLayout","column","fxLayoutGap","19px"],["fxFlex","48",4,"ngFor","ngForOf"],["fxFlex","48"],["fxLayout.lg","row","fxLayout","column","fxLayoutGap","19px"],["fxFlex","30%"],["fxFlex","70%"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t._uU(3,"Eliminar solicitud"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.volver()}),t._uU(5,"volver"),t.qZA()(),t.TgZ(6,"mat-card")(7,"mat-card-title",4),t._uU(8,"Encabezado solicitud"),t.qZA(),t.TgZ(9,"mat-card-content",5),t.YNc(10,mt,9,6,"div",6),t.ALo(11,"keyvalue"),t.qZA()(),t.TgZ(12,"mat-card")(13,"mat-card-title",4),t._uU(14,"Informaci\xf3n perfil vacante"),t.qZA(),t.TgZ(15,"mat-card-content",5),t.YNc(16,ut,9,6,"div",6),t.ALo(17,"keyvalue"),t.qZA()(),t.TgZ(18,"mat-card")(19,"mat-card-title",4),t._uU(20,"Validaciones"),t.qZA(),t.TgZ(21,"mat-card-content",5)(22,"div",7)(23,"span",8)(24,"strong",9),t._uU(25,"Validacion 1:"),t.qZA(),t.TgZ(26,"p",10),t._uU(27),t.ALo(28,"validaciones"),t.qZA()(),t._UZ(29,"hr"),t.qZA(),t.YNc(30,dt,9,3,"ng-container",11),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("ngForOf",t.xi3(11,4,o.solicitud.encabezado,o.ordenarSolicitud)),t.xp6(6),t.Q6J("ngForOf",t.xi3(17,7,o.solicitud.informacion,o.ordenarSolicitud)),t.xp6(11),t.Oqu(t.lcZ(28,10,null==o.solicitud.validaciones?null:o.solicitud.validaciones[0].estado)),t.xp6(3),t.Q6J("ngIf","v"==(null==o.solicitud.validaciones?null:o.solicitud.validaciones[0].estado)))},directives:[u.xw,u.SQ,T.lW,c.a8,c.n5,c.dn,f.sg,u.yH,f.O5],pipes:[f.Nd,f.rS,V,st],styles:[".actions[_ngcontent-%COMP%]{display:flex;width:100%;gap:19px;justify-content:flex-end}mat-card[_ngcontent-%COMP%]{padding:19px}"]}),n})();var O=l(5113),J=l(2638),Q=l(9416),ft=l(1411);let _t=(()=>{class n{transform(e){return e.split(/\s/).splice(0,2).map(a=>a.charAt(0)).join("")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"userProfile",type:n,pure:!0}),n})();function gt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"span",3),t._uU(2),t.ALo(3,"userProfile"),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nombre",e.user.nombreCompleto),t.xp6(1),t.Oqu(t.lcZ(3,2,e.user.nombreCompleto))}}let ht=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){this.authService.getCurrentUser().subscribe(e=>{e&&(this.user=e)})}logout(){this.authService.logout().subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Q.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-perfil"]],decls:12,vars:3,consts:[["fxLayout","column","fxLayoutAlign","space-around center"],[4,"ngIf"],["mat-button","",3,"click"],["appUserProfile","",3,"nombre"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0),t.YNc(1,gt,4,4,"ng-container",1),t.TgZ(2,"mat-card-title-group")(3,"mat-card-title"),t._uU(4,"Usuario"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-subtitle"),t._uU(8),t.qZA(),t.TgZ(9,"mat-card-actions")(10,"button",2),t.NdJ("click",function(){return o.logout()}),t._uU(11,"Log out"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.user),t.xp6(5),t.Oqu(null==o.user?null:o.user.name),t.xp6(2),t.hij(" Zona: ",null==o.user?null:o.user.zona," "))},directives:[c.a8,u.xw,u.Wh,f.O5,ft.M,c.C1,c.n5,c.$j,c.hq,T.lW],pipes:[_t],styles:["*[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]{cursor:pointer}img[_ngcontent-%COMP%]{height:60px;width:60px}mat-card[_ngcontent-%COMP%]{border:none;box-shadow:none;background-color:transparent}mat-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px}mat-card-title[_ngcontent-%COMP%]{text-align:center}mat-card-subtitle[_ngcontent-%COMP%]{margin:0}"]}),n})();function vt(n,i){if(1&n&&(t.TgZ(0,"mat-nav-list")(1,"a",1),t._uU(2),t.qZA(),t._UZ(3,"hr"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("routerLink",e.link),t.xp6(1),t.hij(" ",e.name," ")}}let Zt=(()=>{class n{constructor(){this.links=[]}ngOnInit(){this.links=[{name:"Crear ticket",link:"/tickets/create"},{name:"Mis tickets",link:"/tickets"},{name:"Tickets pendientes",link:"/tickets/pending"},{name:"Tickets resueltos",link:"/tickets/resolved"}]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sidebar"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"]],template:function(e,o){1&e&&(t._UZ(0,"app-perfil"),t.YNc(1,vt,4,2,"mat-nav-list",0)),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.links))},directives:[ht,f.sg,P.Hk,P.Tg,h.yS],styles:[".mat-list-item[_ngcontent-%COMP%], .mat-nav-list[_ngcontent-%COMP%]{color:#fff}hr[_ngcontent-%COMP%]{height:1px;background-color:#dedede;margin:0 10px;display:block;border-radius:10px;box-shadow:0 0 4px #666}"]}),n})();var E=l(5245);let Ct=(()=>{class n{constructor(e){this.breakpointObserver=e,this.mode="side",this.breakpointObserver.observe([O.u3.Small,O.u3.HandsetPortrait]).subscribe(o=>{this.mode=o.matches?"push":"side"})}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.Yg))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-index"]],decls:11,vars:2,consts:[["autosize",""],[3,"mode","opened"],["snav",""],["color","primary"],["mat-icon-button","",3,"click"]],template:function(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-drawer-container",0)(1,"mat-drawer",1,2),t._UZ(3,"app-sidebar"),t.qZA(),t.TgZ(4,"mat-drawer-content")(5,"mat-toolbar",3)(6,"button",4),t.NdJ("click",function(){return t.CHM(a),t.MAs(2).toggle()}),t.TgZ(7,"mat-icon"),t._uU(8,"menu"),t.qZA()()(),t.TgZ(9,"section"),t._UZ(10,"router-outlet"),t.qZA()()()}2&e&&(t.xp6(1),t.Q6J("mode",o.mode)("opened","side"==o.mode))},directives:[J.kh,J.jA,Zt,J.LW,B.Ye,T.lW,E.Hw,h.lC],styles:["mat-drawer-container[_ngcontent-%COMP%]{height:calc(100% - 64px)}mat-drawer-container[_ngcontent-%COMP%]   mat-drawer[_ngcontent-%COMP%]{background-color:#001b46;min-width:200px}mat-drawer-container[_ngcontent-%COMP%]   mat-drawer-content[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{position:static}mat-drawer-container[_ngcontent-%COMP%]   mat-drawer-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{position:relative}mat-drawer-container[_ngcontent-%COMP%]   mat-drawer-content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{position:relative;width:100%}"]}),n})();var A=l(1777),z=l(6087),Y=l(4847),g=l(4999),Tt=l(1135),$=l(8424),q=l(7322),G=l(4107),D=l(508),X=l(7531),xt=l(7238),y=l(6688),W=l(3322);function bt(n,i){1&n&&(t.ynx(0),t.TgZ(1,"mat-select")(2,"mat-option",23),t._uU(3,"ZONA I"),t.qZA(),t.TgZ(4,"mat-option",23),t._uU(5,"ZONA I"),t.qZA(),t.TgZ(6,"mat-option",23),t._uU(7,"ZONA I"),t.qZA(),t.TgZ(8,"mat-option",23),t._uU(9,"ZONA I"),t.qZA(),t.TgZ(10,"mat-option",23),t._uU(11,"ZONA I"),t.qZA(),t.TgZ(12,"mat-option",23),t._uU(13,"ZONA I"),t.qZA(),t.TgZ(14,"mat-option",23),t._uU(15,"ZONA I"),t.qZA(),t.TgZ(16,"mat-option",23),t._uU(17,"ZONA I"),t.qZA()(),t.BQk())}function At(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"input",24,25),t.NdJ("keyup.enter",function(){t.CHM(e);const a=t.MAs(1),r=t.oxw(),m=t.MAs(7);return r.addFilter(m.value,a.value)}),t.qZA()}}function qt(n,i){1&n&&(t.TgZ(0,"mat-icon",28),t._uU(1,"cancel"),t.qZA())}function yt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip",26),t.NdJ("removed",function(){const r=t.CHM(e).$implicit;return t.oxw().remove(r.propiedad)}),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"title"),t.YNc(4,qt,2,0,"mat-icon",27),t.qZA()}if(2&n){const e=i.$implicit;t.Q6J("selectable",!1)("removable",!0),t.xp6(1),t.AsE(" ",t.lcZ(2,5,t.lcZ(3,7,e.propiedad))," : ",e.valor," "),t.xp6(3),t.Q6J("ngIf",!0)}}const K=function(){return{width:"20px"}};function kt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",46),t._uU(1," ID "),t.qZA()),2&n&&t.Q6J("ngStyle",t.DdM(1,K))}function Ot(n,i){if(1&n&&(t.TgZ(0,"mat-cell",47),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("ngStyle",t.DdM(2,K)),t.xp6(1),t.hij(" ",e.id," ")}}function Ut(n,i){1&n&&(t.TgZ(0,"mat-header-cell",48),t._uU(1," CONTRATO "),t.qZA())}function It(n,i){if(1&n&&(t.TgZ(0,"mat-cell")(1,"div",49)(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.Oqu(e.codigoContrato),t.xp6(2),t.Oqu(e.nombreContrato)}}function Mt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",48),t._uU(1," EMPRESA "),t.qZA())}function Ft(n,i){if(1&n&&(t.TgZ(0,"mat-cell")(1,"div",49)(2,"label"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.Oqu(e.zona),t.xp6(2),t.Oqu(e.nombreEmpresa)}}function Nt(n,i){1&n&&(t.TgZ(0,"mat-header-cell",48),t._uU(1," INSTALACION "),t.qZA())}function Rt(n,i){if(1&n&&(t.TgZ(0,"mat-cell")(1,"div",49)(2,"label"),t._uU(3),t.ALo(4,"number"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,e.codigoInstalacion)),t.xp6(3),t.Oqu(e.nombreInstalacion)}}function St(n,i){1&n&&(t.TgZ(0,"mat-header-cell",48),t._uU(1," MOTIVO SOLICITUD "),t.qZA())}const Pt=function(n){return[n]};function wt(n,i){if(1&n&&(t.TgZ(0,"mat-cell")(1,"a",50),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(4,Pt,"./details/"+e.id)),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.nombreConcepto),"")}}function Jt(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," BENEFICIARIO "),t.qZA())}function Qt(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.rutBeneficiario," ")}}function Et(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," VALIDACION "),t.qZA())}const Yt=function(){return{color:"green"}};function Dt(n,i){if(1&n&&(t.TgZ(0,"mat-icon",54),t._uU(1,"check_circle"),t.qZA()),2&n){const e=t.oxw().index;t.Q6J("ngStyle",t.DdM(2,Yt))("matTooltip","Validacion "+(e+1))}}const Lt=function(){return{color:"blue"}};function jt(n,i){if(1&n&&(t.TgZ(0,"mat-icon",54),t._uU(1,"pending"),t.qZA()),2&n){const e=t.oxw().index;t.Q6J("ngStyle",t.DdM(2,Lt))("matTooltip","Validacion "+(e+1))}}const Bt=function(){return{color:"red"}};function Ht(n,i){if(1&n&&(t.TgZ(0,"mat-icon",54),t._uU(1,"cancel"),t.qZA()),2&n){const e=t.oxw().index;t.Q6J("ngStyle",t.DdM(2,Bt))("matTooltip","Validacion "+(e+1))}}function Vt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Dt,2,3,"mat-icon",53),t.YNc(2,jt,2,3,"mat-icon",53),t.YNc(3,Ht,2,3,"mat-icon",53),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf","v"==e.estado),t.xp6(1),t.Q6J("ngIf","p"==e.estado),t.xp6(1),t.Q6J("ngIf","r"==e.estado)}}function zt(n,i){if(1&n&&(t.TgZ(0,"mat-cell",51),t.YNc(1,Vt,4,3,"ng-container",52),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e.validaciones)}}function $t(n,i){1&n&&t._UZ(0,"mat-header-row")}function Gt(n,i){1&n&&t._UZ(0,"mat-row")}function Xt(n,i){1&n&&(t.TgZ(0,"mat-row")(1,"mat-cell",55),t._uU(2,"Ningun registro encontrado"),t.qZA()())}function Wt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-table",29),t.NdJ("matSortChange",function(a){return t.CHM(e),t.oxw().sortData(a)}),t.ynx(1,30),t.YNc(2,kt,2,2,"mat-header-cell",31),t.YNc(3,Ot,2,3,"mat-cell",32),t.BQk(),t.ynx(4,33),t.YNc(5,Ut,2,0,"mat-header-cell",34),t.YNc(6,It,6,2,"mat-cell",35),t.BQk(),t.ynx(7,36),t.YNc(8,Mt,2,0,"mat-header-cell",34),t.YNc(9,Ft,6,2,"mat-cell",35),t.BQk(),t.ynx(10,37),t.YNc(11,Nt,2,0,"mat-header-cell",34),t.YNc(12,Rt,7,4,"mat-cell",35),t.BQk(),t.ynx(13,38),t.YNc(14,St,2,0,"mat-header-cell",34),t.YNc(15,wt,4,6,"mat-cell",35),t.BQk(),t.ynx(16,39),t.YNc(17,Jt,2,0,"mat-header-cell",40),t.YNc(18,Qt,2,1,"mat-cell",35),t.BQk(),t.ynx(19,41),t.YNc(20,Et,2,0,"mat-header-cell",40),t.YNc(21,zt,2,1,"mat-cell",42),t.BQk(),t.YNc(22,$t,1,0,"mat-header-row",43),t.YNc(23,Gt,1,0,"mat-row",44),t.YNc(24,Xt,3,0,"mat-row",45),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("ngIf",e.dataSource.data.length<1)}}const Kt=function(){return[5,25,40]};let te=(()=>{class n{constructor(e){this.ticketService=e,this.displayedColumns=["id","codigoContrato","nombreEmpresa","instalacion","motivo","cargo","validacion"],this.dataSource=new g.by,this.state=new Tt.X("collapsed"),this.filters=[],this.loading=!1,this.suscriptions=[]}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){this.ticketService.obtenerListado().subscribe(o=>{o.ok&&(console.log(o.count),this.dataSource=new g.by(o.data),this.paginator.pageSize=25,this.paginator.length=o.count)});const e=this.state.pipe((0,w.U)(o=>"collapsed"==o?"expanded":"collapsed")).subscribe(console.log);this.suscriptions.push(e)}ngOnDestroy(){this.suscriptions.forEach(e=>e.unsubscribe())}onClick(){const e=this.state.getValue();this.state.next(e)}sortData(e){}addFilter(e,o){if(o.length<1)return;-1==this.filters.map(({propiedad:m})=>m).indexOf(e)?this.filters.push({propiedad:e,valor:o}):this.filters.find(({propiedad:m})=>m==e).valor=o,this.applyFilters();const r=this.state.getValue();this.state.next(r)}remove(e){const o=this.filters.map(({propiedad:a})=>a).indexOf(e);this.filters.splice(o,1),this.applyFilters()}applyFilters(){console.log(this.filters),this.filters.sort((e,o)=>e.propiedad>o.propiedad?1:-1),this.loading=!0,this.debounce&&clearTimeout(this.debounce),this.debounce=setTimeout(()=>{this.ticketService.obtenerListado(this.filters).subscribe(e=>{e.ok&&(this.loading=!1,this.dataSource=new g.by(e.data))})},1e3)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mis-tickets"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Y.YE,5),t.Gf(z.NW,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.sort=a.first),t.iGM(a=t.CRH())&&(o.paginator=a.first)}},decls:43,vars:9,consts:[[3,"loading"],["fxLayout","row","fxLayoutGap","10px"],["fxFlex","33"],["key",""],["label","Identificadores"],["value","id"],["value","idContrato"],["value","idZona"],["value","idInstalacion"],["label","Valores"],["value","contrato"],["value","empresa"],["value","instalacion"],["value","motivo"],["value","beneficiario"],["value","validacion"],[4,"ngIf","ngIfElse"],["input",""],["fxflex","auto","mat-icon-button","","matTooltip","Mostrar filtros",3,"click"],[1,"filters"],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matSort","",3,"dataSource","matSortChange",4,"ngIf"],["aria-label","Items por pagina",3,"pageSize","pageSizeOptions"],["value",""],["matInput","","type","text",3,"keyup.enter"],["filter",""],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["matSort","",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-sort-header","",3,"ngStyle",4,"matHeaderCellDef"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","codigoContrato"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nombreEmpresa"],["matColumnDef","instalacion"],["matColumnDef","motivo"],["matColumnDef","cargo"],[4,"matHeaderCellDef"],["matColumnDef","validacion"],["class","centered",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-sort-header","",3,"ngStyle"],[3,"ngStyle"],["mat-sort-header",""],[1,"labeled-cell"],[3,"routerLink"],[1,"centered"],[4,"ngFor","ngForOf"],[3,"ngStyle","matTooltip",4,"ngIf"],[3,"ngStyle","matTooltip"],["colspan","4",1,"mat-cell"]],template:function(e,o){if(1&e&&(t._UZ(0,"app-loading",0),t.TgZ(1,"mat-card")(2,"span",1)(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Filtrar:"),t.qZA(),t.TgZ(6,"mat-select",null,3)(8,"mat-optgroup",4)(9,"mat-option",5),t._uU(10,"ID"),t.qZA(),t.TgZ(11,"mat-option",6),t._uU(12,"ID CONTRATO"),t.qZA(),t.TgZ(13,"mat-option",7),t._uU(14," ID ZONA"),t.qZA(),t.TgZ(15,"mat-option",8),t._uU(16,"ID INSTALACION"),t.qZA()(),t.TgZ(17,"mat-optgroup",9)(18,"mat-option",10),t._uU(19,"CONTRATO"),t.qZA(),t.TgZ(20,"mat-option",11),t._uU(21,"EMPRESA"),t.qZA(),t.TgZ(22,"mat-option",12),t._uU(23,"INSTALACION"),t.qZA(),t.TgZ(24,"mat-option",13),t._uU(25,"MOTIVO"),t.qZA(),t.TgZ(26,"mat-option",14),t._uU(27,"BENEFICIARIO"),t.qZA(),t.TgZ(28,"mat-option",15),t._uU(29,"VALIDACION"),t.qZA()()()(),t.TgZ(30,"mat-form-field",2),t.YNc(31,bt,18,0,"ng-container",16),t.YNc(32,At,2,0,"ng-template",null,17,t.W1O),t.qZA(),t.TgZ(34,"button",18),t.NdJ("click",function(){return o.onClick()}),t.TgZ(35,"mat-icon"),t._uU(36," filter_alt "),t.qZA()()(),t.TgZ(37,"div",19)(38,"mat-chip-list"),t.YNc(39,yt,5,9,"mat-chip",20),t.qZA()()(),t.TgZ(40,"div"),t.YNc(41,Wt,25,5,"mat-table",21),t._UZ(42,"mat-paginator",22),t.qZA()),2&e){const a=t.MAs(7),r=t.MAs(33);t.Q6J("loading",!o.dataSource||o.loading),t.xp6(31),t.Q6J("ngIf","idZona"==a.value)("ngIfElse",r),t.xp6(6),t.Q6J("@detailExpand",o.state),t.xp6(2),t.Q6J("ngForOf",o.filters),t.xp6(2),t.Q6J("ngIf",o.dataSource.data.length>0),t.xp6(1),t.Q6J("pageSize",5)("pageSizeOptions",t.DdM(8,Kt))}},directives:[$.N,c.a8,u.xw,u.SQ,q.KE,u.yH,q.hX,G.gD,D.Nv,D.ey,f.O5,X.Nt,T.lW,xt.gM,E.Hw,y.qn,f.sg,y.HS,y.qH,g.BZ,Y.YE,g.w1,g.fO,g.ge,Y.nU,f.PC,W.Zl,g.Dz,g.ev,h.yS,g.as,g.XQ,g.nj,g.Gk,z.NW],pipes:[f.rS,V,f.JJ],styles:["mat-header-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}mat-row[_ngcontent-%COMP%]{gap:10px}mat-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{white-space:nowrap;gap:10px;text-overflow:ellipsis;overflow:hidden}mat-row[_ngcontent-%COMP%]   mat-cell.centered[_ngcontent-%COMP%]{justify-content:center}mat-card[_ngcontent-%COMP%]{width:auto;margin-bottom:8px}.filters[_ngcontent-%COMP%]{overflow:hidden;display:flex}.labeled-cell[_ngcontent-%COMP%]{display:grid;justify-items:start}.labeled-cell[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:gray;font-size:10px}.mat-column-id[_ngcontent-%COMP%]{flex:0 0 10%}"],data:{animation:[(0,A.X$)("detailExpand",[(0,A.SB)("collapsed",(0,A.oB)({height:"0px",minHeight:"0"})),(0,A.SB)("expanded",(0,A.oB)({height:"*"})),(0,A.eR)("expanded <=> collapsed",(0,A.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),n})();var d=l(3075),ee=l(262),ne=l(9646),F=l(3224);let oe=(()=>{class n{constructor(){}validar(e){return(0,F.validate)(e)}limpiar(e){return(0,F.clean)(e)}formatear(e){return(0,F.format)(e)}digitoVerificador(e){return(0,F.getCheckDigit)(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ie=l(704),L=l(6856);let tt=(()=>{class n{constructor(e,o,a){this.viewContainerRef=e,this.templateRef=o,this.authService=a,this.subscription=[]}ngOnInit(){this.subscription.push(this.authService.getCurrentUser().subscribe(e=>{var o;e.perms||this.viewContainerRef.clear(),(null===(o=e.perms)||void 0===o?void 0:o.findIndex(r=>-1!==this.ifRoles.indexOf(r)))?this.viewContainerRef.clear():this.viewContainerRef.createEmbeddedView(this.templateRef)}))}ngOnDestroy(){this.subscription.forEach(e=>e.unsubscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.s_b),t.Y36(t.Rgc),t.Y36(Q.e))},n.\u0275dir=t.lG2({type:n,selectors:[["","ifRoles",""]],inputs:{ifRoles:"ifRoles"}}),n})();const ae=["picker"];function re(n,i){1&n&&(t.TgZ(0,"mat-hint",32),t._uU(1," Rut valido "),t.qZA())}function le(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function ce(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Formato invalido "),t.qZA())}function se(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Sin contratos "),t.qZA())}function me(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function ue(n,i){if(1&n&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij("",e.value," ")}}function de(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function pe(n,i){if(1&n&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value,"")}}function fe(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function _e(n,i){1&n&&(t.TgZ(0,"mat-hint",32),t._uU(1," Contratos encontrados "),t.qZA())}function ge(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function he(n,i){if(1&n&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.idcontrato),t.xp6(1),t.AsE("(",e.idcontrato,") ",e.nombreContrato,"")}}function ve(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function Ze(n,i){if(1&n&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.descripcion)}}function Ce(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function Te(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function xe(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function be(n,i){1&n&&(t.TgZ(0,"mat-icon",37),t._uU(1,"cancel"),t.qZA())}function Ae(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip",35),t.NdJ("removed",function(){const r=t.CHM(e).$implicit;return t.oxw().remove(r)}),t._uU(1),t.YNc(2,be,2,0,"mat-icon",36),t.qZA()}if(2&n){const e=i.$implicit;t.Q6J("selectable",!1)("removable",!0),t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",!0)}}function qe(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo requerido "),t.qZA())}function ye(n,i){1&n&&(t.TgZ(0,"div")(1,"strong"),t._uU(2,"permisosssss"),t.qZA()())}const et=function(n){return{"mat-form-field-valid":n}},ke=function(){return[4]},Ie=[{path:"",component:lt,canActivate:[s.B],canActivateChild:[s.B],children:[{path:"",pathMatch:"full",canActivate:[s.B],component:rt},{path:"tickets",component:Ct,canActivateChild:[s.B],children:[{path:"",pathMatch:"full",component:te},{path:"create",component:(()=>{class n{constructor(e,o,a,r,m){this.breakpointObserver=e,this.fb=o,this.rutService=a,this.ticketService=r,this.swal=m,this.rutValido=!1,this.zonas={},this.empresas={},this.contratos=[],this.conceptos=[],this.touch=!1,this.CLOSE_ON_SELECTED=!1,this.hoy=new Date,this.dias=[],this.rango=[new Date(this.hoy.getFullYear(),this.hoy.getMonth(),1),new Date(this.hoy.getFullYear(),this.hoy.getMonth()+1,0)],this.dateClass=p=>-1!==this.findDate(p)?["selected"]:[],this.personaForm=this.fb.group({rutBeneficiario:[null,[d.kI.required,d.kI.minLength(7),d.kI.maxLength(12)]],codigoPayroll:[null,d.kI.required],nombreBeneficiario:[null,[d.kI.required]],idZona:[null,[d.kI.required,d.kI.pattern(/\d/)]],idEmpresa:[null,[d.kI.required]],codigoInstalacion:[null,d.kI.required],nombreInstalacion:[null,[d.kI.required,d.kI.pattern(/\d/)]],codigoContrato:[null,d.kI.required],nombreContrato:[null,d.kI.required]}),this.justificacionForm=this.fb.group({idConcepto:[null,[d.kI.required]],monto:[null,[d.kI.required]],explicacion:[""],dias:[null,[d.kI.required]]}),this.breakpointObserver.observe([O.u3.Small,O.u3.HandsetPortrait]).subscribe(p=>{this.touch=!!p.matches})}ngOnInit(){this.ticketService.checkConcepto().pipe((0,w.U)(e=>{var o;return e.ok&&(e.data.conceptos=null===(o=e.data)||void 0===o?void 0:o.conceptos.filter(a=>"r"===a.tipo)),e})).subscribe(e=>{var o;this.conceptos=(null==e?void 0:e.ok)?null===(o=e.data)||void 0===o?void 0:o.conceptos:[]})}formatRut(){const e=this.personaForm.get("rutBeneficiario");(null==e?void 0:e.value.length)<7||(this.rutService.validar(null==e?void 0:e.value)?null==e||e.setErrors({rut:!1}):null==e||e.setErrors({rut:!0}),null==e||e.setValue(this.rutService.formatear(e.value)))}onFocus(){this.rutValido=!1;const e=this.personaForm.get("rutBeneficiario");null==e||e.setValue(this.rutService.limpiar(e.value))}dateChanged(e){var o,a,r;if(e.value){const m=e.value,p=this.findDate(m);if(-1===p?(this.dias.push(m.getDate().toString()),null===(o=this.justificacionForm.get("dias"))||void 0===o||o.setValue(this.dias)):(this.dias.splice(p,1),null===(a=this.justificacionForm.get("dias"))||void 0===a||a.setValue(this.dias)),!this.CLOSE_ON_SELECTED){const _=null===(r=this.picker)||void 0===r?void 0:r.close;this.picker.close=()=>{},this.picker._componentRef.instance._calendar.monthView._createWeekCells(),setTimeout(()=>{this.picker.close=_})}}}findDate(e){return this.dias.map(a=>a).indexOf(e.getDate().toString())}openDatePicker(){this.picker.open()}remove(e){var o;const a=new Date,r=this.findDate(new Date(a.getFullYear(),a.getMonth(),Number(e)));this.dias.splice(r,1),null===(o=this.justificacionForm.get("dias"))||void 0===o||o.setValue(this.dias)}checkRut(){const e=this.personaForm.get("rutBeneficiario");(null==e?void 0:e.valid)?this.ticketService.checkRut(e.value).pipe((0,ee.K)(o=>{var a;return null===(a=this.personaForm.get("rutBeneficiario"))||void 0===a||a.setErrors({sinContratos:!0}),(0,ne.of)({data:void 0,ok:!1})})).subscribe(o=>{var a,r,m,p,_,Z,C,v;o.ok&&(this.rutValido=!0,this.personaForm.enable(),null===(a=this.personaForm.get("codigoPayroll"))||void 0===a||a.setValue(null===(r=o.data)||void 0===r?void 0:r.codigoPayroll),null===(m=this.personaForm.get("nombreBeneficiario"))||void 0===m||m.setValue(null===(p=o.data)||void 0===p?void 0:p.nombre),this.zonas={[null===(_=o.data)||void 0===_?void 0:_.codigoZona]:null===(Z=o.data)||void 0===Z?void 0:Z.zona},this.empresas={[null===(C=o.data)||void 0===C?void 0:C.codigoEmpresa]:null===(v=o.data)||void 0===v?void 0:v.empresa})}):null==e||e.markAsTouched()}checkContratos(){var e,o,a,r,m,p;const{idZona:_,idEmpresa:Z,nombreInstalacion:C}=this.personaForm.value;if(!_||!Z||!C)return null===(e=this.personaForm.get("idZona"))||void 0===e||e.markAsTouched(),null===(o=this.personaForm.get("codigoEmpresa"))||void 0===o||o.markAsTouched(),null===(a=this.personaForm.get("codigoInstalacion"))||void 0===a||a.markAsTouched(),null===(r=this.personaForm.get("zona"))||void 0===r||r.setErrors({required:!0}),null===(m=this.personaForm.get("empresa"))||void 0===m||m.setErrors({required:!0}),void(null===(p=this.personaForm.get("instalacion"))||void 0===p||p.setErrors({required:!0}));this.contratos=[],this.ticketService.checkContratos(_,Z,C).subscribe(v=>{var x,U;v.ok&&(null===(x=this.personaForm.get("codigoInstalacion"))||void 0===x||x.setValue(v.data[0].idInstalacion),null===(U=this.personaForm.get("nombreInstalacion"))||void 0===U||U.setValue(v.data[0].nombreInstalacion),this.contratos=v.data)})}onChange(){var e,o,a;const r=null===(e=this.personaForm.get("codigoContrato"))||void 0===e?void 0:e.value,m=null===(o=this.contratos.find(p=>p.idcontrato==r))||void 0===o?void 0:o.nombreContrato;null===(a=this.personaForm.get("nombreContrato"))||void 0===a||a.setValue(`(${r}) ${m}`)}onSubmit(){this.personaForm.markAllAsTouched(),this.justificacionForm.markAllAsTouched();const e=this.justificacionForm.value,{dias:o}=e,a=(0,H._T)(e,["dias"]),r=new Date(this.hoy.getFullYear(),this.hoy.getMonth(),Number(o.sort()[0])).toISOString(),m=new Date(this.hoy.getFullYear(),this.hoy.getMonth(),Number(o.sort()[o.length-1])).toISOString(),p=Object.assign(Object.assign({fechaInicio:r,fechaTermino:m,dias:`${o}`},this.personaForm.value),a);this.ticketService.enviarReliquidacion(p).subscribe(_=>{_.ok&&this.swal.createAlert({title:"Reliquidacion enviada",icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0}).then(()=>{this.dias=[],this.rutValido=!1,this.contratos=[],this.personaForm.reset(),this.justificacionForm.reset()})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.Yg),t.Y36(d.qu),t.Y36(oe),t.Y36(M),t.Y36(ie.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-reliquidacion"]],viewQuery:function(e,o){if(1&e&&t.Gf(ae,5),2&e){let a;t.iGM(a=t.CRH())&&(o.picker=a.first)}},features:[t._Bn([])],decls:94,vars:46,consts:[[3,"loading"],[1,"header"],[3,"formGroup"],["fxLayout","column","fxLayout.md","row","fxLayout.lg","row","fxLayout.xl","row","fxLayoutGap","90px"],["fxFlex","50%",1,"input-wrapper"],["appearance","outline",3,"ngClass"],["matInput","","placeholder","Ej: 12.345.678-9","formControlName","rutBeneficiario",3,"maxlength","focus","change","focusout"],["class","success",4,"ngIf"],[4,"ngIf"],["type","button","mat-flat-button","","color","primary",3,"click"],["appearance","outline","fxFlex","50%"],["matInput","","formControlName","nombreBeneficiario"],["appearance","outline"],["formControlName","idZona",3,"disabled"],["selected","",3,"value",4,"ngFor","ngForOf"],["formControlName","idEmpresa",3,"disabled"],["matInput","","formControlName","nombreInstalacion"],["matInput","","formControlName","codigoContrato",3,"disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","idConcepto"],["matInput","","formControlName","monto"],["matInput","","formControlName","explicacion","required",""],[3,"click"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","formControlName","dias","placeholder","Seleccione los dias considerados",3,"min","max","matDatepicker","matChipInputFor","click","dateChange"],["matPrefix","",3,"for"],[3,"touchUi","startAt","dateClass"],["picker",""],[4,"ifRoles"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"success"],["selected","",3,"value"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(e,o){if(1&e&&(t._UZ(0,"app-loading",0),t.TgZ(1,"mat-card")(2,"mat-card-title",1),t._uU(3,"Reliquidaciones EULEN"),t.qZA(),t.TgZ(4,"mat-card-content")(5,"mat-card-subtitle"),t._uU(6," Persona a reliquidar "),t.qZA(),t.TgZ(7,"form",2)(8,"div",3)(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),t._uU(12,"Rut"),t.qZA(),t.TgZ(13,"input",6),t.NdJ("focus",function(){return o.onFocus()})("change",function(){return o.rutValido=!1})("focusout",function(){return o.formatRut()}),t.qZA(),t.YNc(14,re,2,0,"mat-hint",7),t.YNc(15,le,2,0,"mat-error",8),t.YNc(16,ce,2,0,"mat-error",8),t.YNc(17,se,2,0,"mat-error",8),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return o.checkRut()}),t._uU(19,"Buscar"),t.qZA()(),t.TgZ(20,"mat-form-field",10)(21,"mat-label"),t._uU(22,"Nombre completo"),t.qZA(),t._UZ(23,"input",11),t.YNc(24,me,2,0,"mat-error",8),t.qZA()(),t.TgZ(25,"div",3)(26,"mat-form-field",12)(27,"mat-label"),t._uU(28,"Zona"),t.qZA(),t.TgZ(29,"mat-select",13),t.YNc(30,ue,2,2,"mat-option",14),t.ALo(31,"keyvalue"),t.qZA(),t.YNc(32,de,2,0,"mat-error",8),t.qZA(),t.TgZ(33,"mat-form-field",12)(34,"mat-label"),t._uU(35,"Empresa"),t.qZA(),t.TgZ(36,"mat-select",15),t.YNc(37,pe,2,2,"mat-option",14),t.ALo(38,"keyvalue"),t.qZA(),t.YNc(39,fe,2,0,"mat-error",8),t.qZA()(),t.TgZ(40,"div",3)(41,"div",4)(42,"mat-form-field",5)(43,"mat-label"),t._uU(44,"Instalacion"),t.qZA(),t._UZ(45,"input",16),t.YNc(46,_e,2,0,"mat-hint",7),t.YNc(47,ge,2,0,"mat-error",8),t.qZA(),t.TgZ(48,"button",9),t.NdJ("click",function(){return o.checkContratos()}),t._uU(49,"Buscar contratos"),t.qZA()(),t.TgZ(50,"mat-form-field",10)(51,"mat-label"),t._uU(52,"Contrato"),t.qZA(),t.TgZ(53,"mat-select",17),t.NdJ("selectionChange",function(){return o.onChange()}),t.YNc(54,he,2,3,"mat-option",18),t.qZA(),t.YNc(55,ve,2,0,"mat-error",8),t.qZA()()()(),t.TgZ(56,"mat-card-content")(57,"mat-card-subtitle"),t._uU(58," Justificacion y monto "),t.qZA(),t.TgZ(59,"form",2)(60,"div",3)(61,"mat-form-field",12)(62,"mat-label"),t._uU(63,"Concepto"),t.qZA(),t.TgZ(64,"mat-select",19),t.YNc(65,Ze,2,2,"mat-option",18),t.qZA(),t.YNc(66,Ce,2,0,"mat-error",8),t.qZA(),t.TgZ(67,"mat-form-field",12)(68,"mat-label"),t._uU(69,"Monto"),t.qZA(),t._UZ(70,"input",20),t.YNc(71,Te,2,0,"mat-error",8),t.qZA()(),t.TgZ(72,"div",3)(73,"mat-form-field",12)(74,"mat-label"),t._uU(75,"Explicacion"),t.qZA(),t._UZ(76,"textarea",21),t.YNc(77,xe,2,0,"mat-error",8),t.qZA()(),t.TgZ(78,"div")(79,"mat-form-field",12)(80,"mat-label"),t._uU(81,"Seleccione los dias considerados"),t.qZA(),t.TgZ(82,"mat-chip-list",22,23),t.NdJ("click",function(){return o.openDatePicker()}),t.YNc(84,Ae,3,4,"mat-chip",24),t.TgZ(85,"input",25),t.NdJ("click",function(){return o.openDatePicker()})("dateChange",function(r){return o.dateChanged(r)}),t.qZA()(),t._UZ(86,"mat-datepicker-toggle",26)(87,"mat-datepicker",27,28),t.YNc(89,qe,2,0,"mat-error",8),t.qZA()()()(),t.YNc(90,ye,3,0,"div",29),t.TgZ(91,"div",30)(92,"button",31),t.NdJ("click",function(){return o.onSubmit()}),t._uU(93,"Enviar"),t.qZA()()()),2&e){const a=t.MAs(83),r=t.MAs(88);let m,p,_,Z,C,v,x,U,nt,ot,it,at;t.Q6J("loading",!o.conceptos),t.xp6(7),t.Q6J("formGroup",o.personaForm),t.xp6(3),t.Q6J("ngClass",t.VKq(41,et,o.rutValido)),t.xp6(3),t.Q6J("maxlength",12),t.xp6(1),t.Q6J("ngIf",o.rutValido),t.xp6(1),t.Q6J("ngIf",null==(m=o.personaForm.get("rutBeneficiario"))?null:m.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(p=o.personaForm.get("rutBeneficiario"))?null:p.hasError("rut")),t.xp6(1),t.Q6J("ngIf",null==(_=o.personaForm.get("rutBeneficiario"))?null:_.hasError("sinContratos")),t.xp6(7),t.Q6J("ngIf",null==(Z=o.personaForm.get("nombreBeneficiario"))?null:Z.hasError("required")),t.xp6(5),t.Q6J("disabled",!o.rutValido),t.xp6(1),t.Q6J("ngForOf",t.lcZ(31,37,o.zonas)),t.xp6(2),t.Q6J("ngIf",null==(C=o.personaForm.get("idZona"))?null:C.hasError("required")),t.xp6(4),t.Q6J("disabled",!o.rutValido),t.xp6(1),t.Q6J("ngForOf",t.lcZ(38,39,o.empresas)),t.xp6(2),t.Q6J("ngIf",null==(v=o.personaForm.get("idEmpresa"))?null:v.hasError("required")),t.xp6(3),t.Q6J("ngClass",t.VKq(43,et,o.contratos.length>0)),t.xp6(4),t.Q6J("ngIf",o.contratos.length>0),t.xp6(1),t.Q6J("ngIf",null==(x=o.personaForm.get("nombreInstalacion"))?null:x.hasError("required")),t.xp6(6),t.Q6J("disabled",!o.rutValido),t.xp6(1),t.Q6J("ngForOf",o.contratos),t.xp6(1),t.Q6J("ngIf",null==(U=o.personaForm.get("codigoContrato"))?null:U.hasError("required")),t.xp6(4),t.Q6J("formGroup",o.justificacionForm),t.xp6(6),t.Q6J("ngForOf",o.conceptos),t.xp6(1),t.Q6J("ngIf",null==(nt=o.justificacionForm.get("idConcepto"))?null:nt.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(ot=o.justificacionForm.get("monto"))?null:ot.hasError("required")),t.xp6(6),t.Q6J("ngIf",null==(it=o.justificacionForm.get("explicacion"))?null:it.hasError("required")),t.xp6(7),t.Q6J("ngForOf",o.dias),t.xp6(1),t.Q6J("min",o.rango[0])("max",o.rango[1])("matDatepicker",r)("matChipInputFor",a),t.xp6(1),t.Q6J("for",r),t.xp6(1),t.Q6J("touchUi",o.touch)("startAt",o.hoy)("dateClass",o.dateClass),t.xp6(2),t.Q6J("ngIf",null==(at=o.justificacionForm.get("fechas"))?null:at.hasError("required")),t.xp6(1),t.Q6J("ifRoles",t.DdM(45,ke))}},directives:[$.N,c.a8,c.n5,c.dn,c.$j,d._Y,d.JL,d.sg,u.xw,u.SQ,u.yH,q.KE,f.mk,W.oO,q.hX,X.Nt,d.Fj,d.JJ,d.u,d.nD,f.O5,q.bx,q.TO,T.lW,G.gD,f.sg,D.ey,d.Q7,y.qn,y.HS,E.Hw,y.qH,L.hl,y.oH,L.nW,q.qo,L.Mq,tt],pipes:[f.Nd],styles:["mat-card[_ngcontent-%COMP%]{display:grid;grid-gap:30px;gap:30px}button[_ngcontent-%COMP%]{margin-left:10px}div.actions[_ngcontent-%COMP%]{display:flex;justify-content:center}div.input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start}div.input-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:none;margin-top:12px}  mat-form-field{width:100%}  mat-form-field mat-chip-list{width:100%;height:100%}  .mat-calendar-body-cell.selected>.mat-calendar-body-cell-content,   .mat-calendar-body-cell.selected:hover>.mat-calendar-body-cell-content,   .mat-calendar-body-cell.selected>.mat-calendar-body-cell-content:hover{background-color:#001b46!important;color:#fff!important}"]}),n})()},{path:"pending",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ticket-pendientes"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"ticket-pendientes works!"),t.qZA())},styles:[""]}),n})()},{path:"details/:id",component:pt},{path:"**",redirectTo:""}]}]},{path:"**",redirectTo:""}];let Me=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.Bz.forChild(Ie)],h.Bz]}),n})();var Fe=l(6227);let Ne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[M,tt,Q.e],imports:[[f.ez,h.Bz,d.UX,Me,Fe.m]]}),n})()},3224:j=>{function b(s){return"string"==typeof s?s.replace(/^0+|[^0-9kK]+/g,"").toUpperCase():""}j.exports={validate:function l(s){if("string"!=typeof s||/^0+/.test(s)||!/^0*(\d{1,3}(\.?\d{3})*)-?([\dkK])$/.test(s))return!1;s=b(s);let t=parseInt(s.slice(0,-1),10),u=0,c=1;for(;t>0;)c=(c+t%10*(9-u++%6))%11,t=Math.floor(t/10);return(c>0?""+(c-1):"K")===s.slice(-1)},clean:b,format:function f(s,t={dots:!0}){let u;if(s=b(s),t.dots){u=s.slice(-4,-1)+"-"+s.substr(s.length-1);for(let c=4;c<s.length;c+=3)u=s.slice(-3-c,-c)+"."+u}else u=s.slice(0,-1)+"-"+s.substr(s.length-1);return u},getCheckDigit:function h(s){const t=Array.from(b(s),Number);if(0===t.length||t.includes(NaN))throw new Error(`"${s}" as RUT is invalid`);const T=11-t.reverse().reduce((N,R,S)=>N+R*(S%6+2),0)%11;return 10===T?"K":11===T?"0":T.toString()}}}}]);